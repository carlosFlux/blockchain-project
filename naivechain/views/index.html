<h1>
    <%= title %>
</h1>

<h2>Escuchando por WebSocket en el puerto:
    <%= p2p_port %>
</h2>

<h2>Initial Peers:
    <%= initialPeers %>
</h2>

<script>
    var ws = new WebSocket('ws://localhost:6001');
    var contador = -1;
    ws.onopen = function () {
        console.log('websocket is connected ...')
        document.getElementById("cont").value = contador;
        document.getElementById("cadena").value = "Cadena vacia.";
    }

    ws.onmessage = function (ev) {
        console.log(ev);
        contador++;
        document.getElementById("cont").value = contador;
        document.getElementById("label1").value = "Nuevo bloque recibido.";
        var datos = JSON.parse(ev.data).data;
        if (datos) {
            document.getElementById("cadena").value = datos;
        }

    }
</script>

<h1>
    <p id="label1"></p>
    <p>
        <input type="text" id="cont">
    </p>

    <p>
        <textarea id="cadena" rows="5" cols="100">
        </textarea>
    </p>
</h1>